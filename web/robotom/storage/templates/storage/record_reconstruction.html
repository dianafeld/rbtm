{% extends "base.html" %}

{% block content %}
    <div class="page-header">
        <div class="container-fluid">
            <h2>Реконструкция эксперимента {{ record_id }}</h2>
        </div>
    </div>
    <div class="container-fluid">
        <div class="panel panel-default">
            <div class="panel-body visualization">
                {% load staticfiles %}
                <div id="container"></div>

                <script src="{% static 'storage/visualization/three.min.js' %}"></script>
                <script src="{% static 'storage/visualization/TrackballControls.js' %}"></script>
                <script src="{% static 'storage/visualization/Detector.js' %}"></script>
                <script src="{% static 'storage/visualization/stats.min.js' %}"></script>
            </div>
            <div class="panel-footer">
                <a class="btn btn-default" href="{% url 'storage:storage_record' record_id %}">Назад к записи</a>
            </div>
        </div>
    </div>
    <script type="x-shader/x-vertex" id="vertexshader">
        precision mediump float;
        precision mediump int;

        uniform mat4 modelViewMatrix; // optional
        uniform mat4 projectionMatrix; // optional
        uniform float median_pSize;

        attribute vec3 position;
        attribute vec3 color;
        attribute float alpha;

        varying vec4 vColor;

        void main() {
            vColor= vec4(color, alpha);

            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
            gl_PointSize = median_pSize * 2.0 * alpha;

        }


    </script>

    <script type="x-shader/x-fragment" id="fragmentshader">

        precision mediump float;
        precision mediump int;

        uniform float time;

        varying vec4 vColor;
        void main() {
            gl_FragColor = vColor;
        }

    </script>

    <script type="application/javascript">
        var NMK = [364, 598, 598];
        var numbers = [0.0, 0.5720613018407144, 1.0, 0.9580032229423523, -28.258241758241756, 4.715719063545148, -13.946488294314381, 0.5639691522044463, 1.0, 0.0, 0.9243993759155273, -28.258241758241756, 4.816053511705682, -14.247491638795987, 0.9577195459548403, 1.0, 0.0, 0.9177290797233582, -28.258241758241756, 4.816053511705682, -14.147157190635452, 0.0, 1.0, 0.9878648051253566, 0.9506502747535706, -28.054945054945055, 4.414715719063542, -14.347826086956522, 0.0, 0.5952230897083839, 1.0, 0.9575027823448181, -28.054945054945055, 4.414715719063542, -14.247491638795987, 1.0, 0.0, 0.09375, 1.0, -28.054945054945055, 4.515050167224077, -14.247491638795987, 1.0, 0.8801479389714684, 0.0, 0.9152242541313171, -28.054945054945055, 4.715719063545148, -14.247491638795987, 1.0, 0.34742681801505326, 0.0, 0.9058972597122192, -28.054945054945055, 5.117056856187294, -14.448160535117058, 1.0, 0.3937503937503937, 0.0, 0.9066576361656189, -28.054945054945055, 5.21739130434783, -13.344481605351172, 1.0, 0.18529430294136176, 0.0, 0.9032452702522278, -28.054945054945055, 5.919732441471575, -13.143812709030101, 0.0, 0.201472695957991, 1.0, 0.964445173740387, -28.054945054945055, 5.919732441471575, -13.043478260869566, 0.7955870308811486, 1.0, 0.0, 0.9205942749977112, -28.054945054945055, 6.02006688963211, -13.043478260869566, 1.0, 0.6253682724270958, 0.0, 0.910903811454773, -20.736263736263737, -4.013377926421406, -15.551839464882942, 1.0, 0.5558829088240852, 0.0, 0.9096781611442566, -20.736263736263737, -2.307692307692306, -15.250836120401338, 0.0, 1.0, 0.13088405300569536, 0.9361894130706787, -20.532967032967033, -3.8127090301003355, -15.250836120401338, 0.0, 1.0, 0.3161771885991356, 0.9390856027603149, -20.532967032967033, -3.8127090301003355, -15.150501672240802, 1.0, 0.2779414544120426, 0.0, 0.9048579931259155, -20.532967032967033, -3.7123745819398, -15.551839464882942, 0.0, 1.0, 0.8025716695319163, 0.9473493695259094, -20.532967032967033, -3.7123745819398, -15.451505016722408, 0.9805143738967269, 0.9764712522065463, 0.0, 0.9170606136322021, -20.532967032967033, -3.7123745819398, -15.351170568561873, 0.0, 1.0, 0.3625004724974957, 0.9399076700210571, -20.532967032967033, -3.7123745819398, -15.250836120401338, 0.5628663036751272, 0.0, 1.0, 0.9772752523422241, -20.532967032967033, -3.7123745819398, -15.150501672240802, 0.0, 0.201472695957991, 1.0, 0.9641612768173218, -20.532967032967033, -3.51170568561873, -15.250836120401338, 1.0, 0.18529430294136176, 0.0, 0.9031695127487183, -20.532967032967033, -3.51170568561873, -15.150501672240802, 0.6102927279397868, 1.0, 0.0, 0.9234510660171509, -20.532967032967033, -3.4113712374581953, -15.250836120401338, 1.0, 0.7875007875007874, 0.0, 0.913609504699707, -20.329670329670332, -3.51170568561873, -15.150501672240802, 0.0235287477934537, 1.0, 0.015442504413092598, 0.9339568018913269, -20.329670329670332, -3.4113712374581953, -15.150501672240802, 0.23970412205706326, 1.0, 0.0, 0.9298176765441895, -20.329670329670332, -3.4113712374581953, -15.050167224080267, 0.6102927279397868, 1.0, 0.0, 0.9235514402389526, -20.126373626373628, -3.3110367892976598, -15.551839464882942, 1.0, 0.2547796665443724, 0.0, 0.9043959975242615, -1.423076923076922, -14.247491638795987, -14.046822742474918, 0.3555130613954144, 1.0, 0.0, 0.9279623031616211, -0.8131868131868144, -13.444816053511706, -14.548494983277592, 1.0, 0.04632357573534044, 0.0, 0.9010010957717896, -0.40659340659340515, -13.043478260869566, -14.849498327759198, 0.17021875845405265, 1.0, 0.0, 0.9311438202857971, -0.20329670329670257, -14.849498327759198, -13.043478260869566, 1.0, 0.0, 0.0, 0.9000142216682434, -0.20329670329670257, -14.849498327759198, -12.943143812709032, 0.0, 0.22463448382566054, 1.0, 0.9636933207511902, -0.20329670329670257, -13.244147157190637, -14.548494983277592, 1.0, 0.2316178786767022, 0.0, 0.904134213924408, 0.20329670329670257, -13.043478260869566, -11.638795986622073, 0.7724252430134786, 1.0, 0.0, 0.9209046363830566, 0.40659340659340515, -14.347826086956522, -13.745819397993312, 0.0, 0.5952230897083839, 1.0, 0.9578048586845398, 0.40659340659340515, -13.043478260869566, -14.247491638795987, 0.0, 1.0, 0.47830868224339584, 0.9421359300613403, 0.40659340659340515, -13.043478260869566, -14.147157190635452, 0.8187488187488188, 1.0, 0.0, 0.9202248454093933, 0.6098901098901077, -14.849498327759198, -12.441471571906353, 1.0, 0.764338999633117, 0.0, 0.9132118821144104, 0.6098901098901077, -13.444816053511706, -11.036789297658862, 1.0, 0.7875007875007874, 0.0, 0.9133964776992798, 0.6098901098901077, -13.344481605351172, -11.036789297658862, 0.0, 0.7573556047820753, 1.0, 0.9550381898880005, 16.060439560439562, -0.30100334448160515, -6.923076923076922, 0.5871309400721167, 1.0, 0.0, 0.9241423606872559, 16.467032967032967, -4.615384615384616, -6.622073578595317, 1.0, 0.4169121816180639, 0.0, 0.9073106050491333, 19.10989010989011, 6.722408026755855, -5.8193979933110365, 1.0, 0.3011032422797128, 0.0, 0.9053525924682617, 19.31318681318681, 4.214046822742472, -5.719063545150501, 1.0, 0.1158089393383511, 0.0, 0.9022220373153687, 19.719780219780223, 2.207357859531771, -9.431438127090301, 0.0, 1.0, 0.9183798792778164, 0.9495327472686768, 19.923076923076927, 3.913043478260867, -5.217391304347826, 0.0, 1.0, 0.6636018178368361, 0.9450752139091492, 19.923076923076927, 9.331103678929766, -3.8127090301003355, 0.4018366371307548, 1.0, 0.0, 0.9271225929260254, 20.126373626373628, 9.732441471571907, -7.625418060200671, 0.0, 0.08566375661963932, 1.0, 0.9661357998847961, 20.329670329670332, -1.806020066889631, -9.130434782608695];
        var numVertices = 50;
        var maxAbsX = 37.0;
        var maxAbsY = 30.0;
        var maxAbsZ = 30.0;
    </script>
{#    <script src="{% static 'storage/visualization/MA0.9_RF1.js' %}"></script>#}
    <script src="{% static 'storage/visualization/main.js' %}"></script>

{% endblock content %}